# EXPRESS QUOTE - Configuration Template
# Copiez ce fichier vers .env.local et remplissez vos vraies valeurs
# Documentation: Toutes les variables nécessaires au fonctionnement complet

# =============================================================================
# API KEYS - Services externes
# =============================================================================
GOOGLE_MAPS_API_KEY=your-google-maps-api-key
TOOLGURU_API_KEY=your-toolguru-api-key

# =============================================================================
# SUPABASE CONFIGURATION - Base de données et authentification
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key
SUPABASE_SERVICE_KEY=your-supabase-service-role-key

# =============================================================================
# DATABASE CONFIGURATION - URLs Prisma
# Documentation: https://pris.ly/d/connection-strings
# =============================================================================
DATABASE_URL="postgresql://user:password@host:port/database?connect_timeout=60&pool_timeout=60&sslmode=require"
DIRECT_URL="postgresql://user:password@host:port/database?connect_timeout=60&sslmode=require"

# =============================================================================
# STRIPE PAYMENT CONFIGURATION - Paiements
# Documentation: https://stripe.com/docs/keys
# =============================================================================
STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_your_stripe_publishable_key"
STRIPE_WEBHOOK_SECRET="whsec_your_stripe_webhook_secret"

# =============================================================================
# EMAIL CONFIGURATION - Notifications par email
# =============================================================================
EMAIL_HOST="smtp.example.com"
EMAIL_PORT="587"
EMAIL_USER="your-email@example.com"
EMAIL_PASSWORD="your-smtp-password"
EMAIL_FROM="Express Quote <noreply@your-domain.com>"

# =============================================================================
# 🔔 NOUVEAU SYSTÈME DE NOTIFICATION v2.0 - Configuration Complète
# =============================================================================

# ═════════════════════════════════════════════════════════════════════════════
# 🔄 REDIS & QUEUE CONFIGURATION - Infrastructure BullMQ
# ═════════════════════════════════════════════════════════════════════════════
#
# Utilité: Configuration Redis pour les queues de notifications BullMQ
# 
# REDIS_URL: Connexion au serveur Redis (local ou cloud)
# - Local: redis://localhost:6379
# - Cloud: redis://user:password@host:port/database
#
# REDIS_PASSWORD: Mot de passe Redis (vide pour développement local)
# REDIS_DB: Numéro de base Redis (0-15, défaut: 0)
# REDIS_MAX_RETRIES: Tentatives de reconnexion automatique
# REDIS_CONNECT_TIMEOUT: Timeout de connexion en millisecondes
#
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_DB="0"
REDIS_MAX_RETRIES="3"
REDIS_CONNECT_TIMEOUT="10000"

# ═════════════════════════════════════════════════════════════════════════════
# 📧 SMTP CONFIGURATION AVANCÉE - Système d'email moderne
# ═════════════════════════════════════════════════════════════════════════════
#
# Configuration SMTP pour le nouveau système de notification
# Compatible avec Gmail, Outlook, services dédiés (Brevo, etc.)
#
# SMTP_HOST: Serveur SMTP
# - Gmail: smtp.gmail.com
# - Outlook: smtp-mail.outlook.com  
# - Brevo: smtp-relay.sendinblue.com
#
# SMTP_PORT: Port de connexion
# - 25: Non sécurisé (éviter)
# - 465: SSL/TLS (sécurisé)  
# - 587: STARTTLS (recommandé)
# - 2525: Alternative STARTTLS
#
# SMTP_USER: Identifiant de connexion (souvent = email)
# SMTP_PASSWORD: Mot de passe ou App Password
# EMAIL_FROM: Adresse d'expédition avec nom affiché
#
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="your-email@gmail.com"
SMTP_PASSWORD="your-app-password"
SMTP_SECURE="false"
EMAIL_FROM="Express Quote <noreply@express-quote.com>"
EMAIL_REPLY_TO="support@express-quote.com"

# ═════════════════════════════════════════════════════════════════════════════
# 📱 WHATSAPP BUSINESS API - Configuration Meta
# ═════════════════════════════════════════════════════════════════════════════
#
# Utilité: Intégration WhatsApp Business pour notifications multi-canal
#
# WHATSAPP_API_URL: URL de base API Meta Graph
# WHATSAPP_ACCESS_TOKEN: Token d'accès permanent
# WHATSAPP_PHONE_NUMBER_ID: ID du numéro de téléphone business
# WHATSAPP_WEBHOOK_VERIFY_TOKEN: Token de vérification webhook
#
# Documentation: https://developers.facebook.com/docs/whatsapp/cloud-api
#
WHATSAPP_API_URL="https://graph.facebook.com/v17.0"
WHATSAPP_ACCESS_TOKEN="your-whatsapp-permanent-token"
WHATSAPP_PHONE_NUMBER_ID="your-phone-number-id"
WHATSAPP_WEBHOOK_VERIFY_TOKEN="your-webhook-verify-token"

# ═════════════════════════════════════════════════════════════════════════════
# 📊 MONITORING & OBSERVABILITÉ - Prometheus & Grafana
# ═════════════════════════════════════════════════════════════════════════════
#
# Configuration pour monitoring du système de notification
#
# PROMETHEUS_PORT: Port d'accès Prometheus (défaut: 9090)
# GRAFANA_PORT: Port d'accès Grafana (défaut: 3001, évite conflit Next.js)
# LOG_LEVEL: Niveau de log Pino (trace, debug, info, warn, error, fatal)
# LOG_FILE_PATH: Chemin des fichiers de log
# METRICS_ENABLED: Activation collecte métriques Prometheus
#
PROMETHEUS_PORT="9090"
GRAFANA_PORT="3001" 
LOG_LEVEL="info"
LOG_FILE_PATH="./logs/notifications.log"
METRICS_ENABLED="true"

# ═════════════════════════════════════════════════════════════════════════════
# ⚙️ CONFIGURATION SYSTÈME DE NOTIFICATION
# ═════════════════════════════════════════════════════════════════════════════
#
# QUEUE_CONCURRENCY: Nombre de workers par queue (email, whatsapp, sms)
# MAX_RETRY_ATTEMPTS: Tentatives maximum avant Dead Letter Queue
# RETRY_DELAY_MS: Délai de base entre tentatives (backoff exponentiel)
# QUEUE_REMOVE_ON_COMPLETE: Garder l'historique des jobs réussis
# QUEUE_REMOVE_ON_FAIL: Garder l'historique des jobs échoués
#
QUEUE_CONCURRENCY="5"
MAX_RETRY_ATTEMPTS="3"
RETRY_DELAY_MS="1000"
QUEUE_REMOVE_ON_COMPLETE="100"
QUEUE_REMOVE_ON_FAIL="50"

# ═════════════════════════════════════════════════════════════════════════════
# 🛡️ CIRCUIT BREAKER - Configuration résilience
# ═════════════════════════════════════════════════════════════════════════════
#
# CIRCUIT_BREAKER_TIMEOUT: Timeout requêtes services externes (ms)
# CIRCUIT_BREAKER_ERROR_THRESHOLD: Seuil d'erreurs avant ouverture
# CIRCUIT_BREAKER_RESET_TIMEOUT: Temps avant test de récupération (ms)
# ENABLE_CIRCUIT_BREAKER: Activation circuit breakers
#
CIRCUIT_BREAKER_TIMEOUT="5000"
CIRCUIT_BREAKER_ERROR_THRESHOLD="5"
CIRCUIT_BREAKER_RESET_TIMEOUT="30000"
ENABLE_CIRCUIT_BREAKER="true"

# ═════════════════════════════════════════════════════════════════════════════
# 🚀 FEATURE FLAGS - Activation fonctionnalités
# ═════════════════════════════════════════════════════════════════════════════
#
# Switches pour activation progressive du nouveau système
#
# ENABLE_NEW_NOTIFICATION_SYSTEM: Master switch système v2.0
# ENABLE_EMAIL_NOTIFICATIONS: Activation canal email
# ENABLE_WHATSAPP_NOTIFICATIONS: Activation canal WhatsApp
# ENABLE_SMS_NOTIFICATIONS: Activation canal SMS (futur)
# ENABLE_REACT_EMAIL_TEMPLATES: Templates React Email vs anciens
# ENABLE_NOTIFICATION_ANALYTICS: Métriques business avancées
#
ENABLE_NEW_NOTIFICATION_SYSTEM="true"
ENABLE_EMAIL_NOTIFICATIONS="true"
ENABLE_WHATSAPP_NOTIFICATIONS="true"
ENABLE_SMS_NOTIFICATIONS="false"
ENABLE_REACT_EMAIL_TEMPLATES="true"
ENABLE_NOTIFICATION_ANALYTICS="true"

# ═════════════════════════════════════════════════════════════════════════════
# 🎯 TEMPLATES & CONTENU - Configuration templates
# ═════════════════════════════════════════════════════════════════════════════
#
# TEMPLATE_CACHE_TTL: Durée de vie cache templates (secondes)
# TEMPLATE_FALLBACK_LANGUAGE: Langue par défaut si détection échoue
# BRAND_NAME: Nom de l'entreprise dans les templates
# BRAND_COLOR: Couleur principale templates (#hexa)
# SUPPORT_EMAIL: Email support clients
# SUPPORT_PHONE: Téléphone support clients
#
TEMPLATE_CACHE_TTL="3600"
TEMPLATE_FALLBACK_LANGUAGE="fr"
BRAND_NAME="Express Quote"
BRAND_COLOR="#3B82F6"
SUPPORT_EMAIL="support@express-quote.com"
SUPPORT_PHONE="+33 1 23 45 67 89"

# ═════════════════════════════════════════════════════════════════════════════
# 🕒 RAPPELS AUTOMATIQUES - Configuration cron
# ═════════════════════════════════════════════════════════════════════════════
#
# REMINDER_CRON_SCHEDULE: Planning exécution rappels (format cron)
# REMINDER_DAYS_BEFORE: Jours avant événement pour rappels
# REMINDER_MAX_ATTEMPTS: Tentatives maximum par rappel
# REMINDER_BATCH_SIZE: Nombre de rappels traités par lot
#
REMINDER_CRON_SCHEDULE="0 9 * * *"
REMINDER_DAYS_BEFORE="7,3,1"
REMINDER_MAX_ATTEMPTS="2"
REMINDER_BATCH_SIZE="100"

# ═════════════════════════════════════════════════════════════════════════════
# 📈 RATE LIMITING - Protection contre surcharge
# ═════════════════════════════════════════════════════════════════════════════
#
# RATE_LIMIT_WINDOW_MS: Fenêtre de temps pour comptage (ms)
# RATE_LIMIT_MAX_EMAIL: Maximum emails par fenêtre
# RATE_LIMIT_MAX_WHATSAPP: Maximum messages WhatsApp par fenêtre
# RATE_LIMIT_MAX_API_CALLS: Maximum appels API notification par fenêtre
#
RATE_LIMIT_WINDOW_MS="60000"
RATE_LIMIT_MAX_EMAIL="100"
RATE_LIMIT_MAX_WHATSAPP="50"
RATE_LIMIT_MAX_API_CALLS="1000"

# ═════════════════════════════════════════════════════════════════════════════
# 🔒 SÉCURITÉ - Tokens et authentification
# ═════════════════════════════════════════════════════════════════════════════
#
# NOTIFICATION_API_SECRET: Secret pour authentification API interne
# WEBHOOK_SIGNATURE_SECRET: Secret pour validation signatures webhooks
# ENCRYPTION_KEY: Clé de chiffrement données sensibles (32 chars)
#
NOTIFICATION_API_SECRET="your-notification-api-secret-key"
WEBHOOK_SIGNATURE_SECRET="your-webhook-signature-secret"
ENCRYPTION_KEY="your-32-character-encryption-key12"

# ═════════════════════════════════════════════════════════════════════════════
# 🌍 ENVIRONNEMENT - Configuration déploiement
# ═════════════════════════════════════════════════════════════════════════════
#
# NODE_ENV: Environnement d'exécution (development, production, test)
# NOTIFICATION_ENV: Environnement spécifique notifications
# DEBUG_NOTIFICATIONS: Mode debug détaillé (true/false)
# HEALTH_CHECK_INTERVAL: Intervalle health checks (ms)
#
NODE_ENV="development"
NOTIFICATION_ENV="development"
DEBUG_NOTIFICATIONS="true"
HEALTH_CHECK_INTERVAL="30000"

# =============================================================================
# DOCUMENT STORAGE - Gestion des fichiers
# =============================================================================
DOCUMENT_STORAGE_PATH="./storage/documents"
MAX_DOCUMENT_SIZE_MB="10"

# =============================================================================
# APPLICATION SETTINGS - Configuration générale
# =============================================================================
APP_URL="http://localhost:3000"
NEXT_PUBLIC_BASE_URL="http://localhost:3000"
SITE_NAME="Express Quote"

# =============================================================================
# LOGGING CONFIGURATION - Gestion des logs
# =============================================================================
LOG_LEVEL="info"
ENABLE_EMAIL_LOGS="true"
ENABLE_PAYMENT_LOGS="true"

# =============================================================================
# SECURITY SETTINGS - Clés de sécurité
# Générer une clé secrète: openssl rand -base64 32
# =============================================================================
SIGNATURE_SECRET="your-secret-key-here"